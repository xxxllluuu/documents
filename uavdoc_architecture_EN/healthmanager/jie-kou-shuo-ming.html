
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>HM Interface Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../monitoragent.html" />
    
    
    <link rel="prev" href="diao-yong-lian.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    UAV.Monitor+APM  Architecture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../healthmanager.html">
            
                <a href="../healthmanager.html">
            
                    
                    Health Manager
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../healthmanager.html">
            
                <a href="../healthmanager.html">
            
                    
                    HM Architecture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="hmfu-wu.html">
            
                <a href="hmfu-wu.html">
            
                    
                    HM Servers
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.1" data-path="xin-tiao-shu-ju-fu-wu.html">
            
                <a href="xin-tiao-shu-ju-fu-wu.html">
            
                    
                    Heartbeat Data Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.2" data-path="hua-xiang-shu-ju-fu-wu.html">
            
                <a href="hua-xiang-shu-ju-fu-wu.html">
            
                    
                    Profile Data Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.3" data-path="shi-shi-shu-ju-fu-wu.html">
            
                <a href="shi-shi-shu-ju-fu-wu.html">
            
                    
                    Monitoring Data Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.4" data-path="rong-qi-jie-dian-shu-ju-fu-wu.html">
            
                <a href="rong-qi-jie-dian-shu-ju-fu-wu.html">
            
                    
                    Node Data Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5" data-path="shi-shi-yu-jing-fu-wu.html">
            
                <a href="shi-shi-yu-jing-fu-wu.html">
            
                    
                    Runtime Notification Server
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.2.5.1" data-path="shi-shi-yu-jing-fu-wu/yu-jing-xin-xi-shu-ju-jie-gou-slice.html">
            
                <a href="shi-shi-yu-jing-fu-wu/yu-jing-xin-xi-shu-ju-jie-gou-slice.html">
            
                    
                    Notification Data Structure
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5.2" data-path="shi-shi-yu-jing-fu-wu/yu-jing-ce-lve.html">
            
                <a href="shi-shi-yu-jing-fu-wu/yu-jing-ce-lve.html">
            
                    
                    Notification Strategy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5.3" data-path="shi-shi-yu-jing-fu-wu/yu-jing-ce-lve-biao-da-shi.html">
            
                <a href="shi-shi-yu-jing-fu-wu/yu-jing-ce-lve-biao-da-shi.html">
            
                    
                    Notification Strategy Expressions
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.5.4" data-path="shi-shi-yu-jing-fu-wu/yu-jing-tong-zhi-ge-shi.html">
            
                <a href="shi-shi-yu-jing-fu-wu/yu-jing-tong-zhi-ge-shi.html">
            
                    
                    Notification Format
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.2.2.6" data-path="yu-jing-zhong-xin-fu-wu.html">
            
                <a href="yu-jing-zhong-xin-fu-wu.html">
            
                    
                    Notification Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.7" data-path="apphubfu-wu.html">
            
                <a href="apphubfu-wu.html">
            
                    
                    AppHub Manager
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.8" data-path="ri-zhi-fu-wu.html">
            
                <a href="ri-zhi-fu-wu.html">
            
                    
                    Log Data Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2.9" data-path="diao-yong-lian.html">
            
                <a href="diao-yong-lian.html">
            
                    
                    APM Server
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.2.2.10" data-path="jie-kou-shuo-ming.html">
            
                <a href="jie-kou-shuo-ming.html">
            
                    
                    HM Interface
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../monitoragent.html">
            
                <a href="../monitoragent.html">
            
                    
                    Monitor Agent
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../monitoragent.html">
            
                <a href="../monitoragent.html">
            
                    
                    MA Architecture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../monitoragent/xin-tiao-ji-zhi.html">
            
                <a href="../monitoragent/xin-tiao-ji-zhi.html">
            
                    
                    Heartbeat Mechanism
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../monitoragent/ying-yong-shu-ju-cai-ji.html">
            
                <a href="../monitoragent/ying-yong-shu-ju-cai-ji.html">
            
                    
                    Application Data Collection
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.3.1" data-path="../monitoragent/ying-yong-shu-ju-cai-ji/ying-yong-shi-shi-shu-ju.html">
            
                <a href="../monitoragent/ying-yong-shu-ju-cai-ji/ying-yong-shi-shi-shu-ju.html">
            
                    
                    Application Monitoring Data
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3.2" data-path="../monitoragent/ying-yong-shu-ju-cai-ji/ying-yong-hua-xiang-shu-ju.html">
            
                <a href="../monitoragent/ying-yong-shu-ju-cai-ji/ying-yong-hua-xiang-shu-ju.html">
            
                    
                    Application Profile Data
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../monitoragent/rong-qi-ji-jin-cheng-shu-ju-cai-ji.html">
            
                <a href="../monitoragent/rong-qi-ji-jin-cheng-shu-ju-cai-ji.html">
            
                    
                    Node and Process Data Collection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../monitoragent/shu-ju-gui-ji-ji-zhi.html">
            
                <a href="../monitoragent/shu-ju-gui-ji-ji-zhi.html">
            
                    
                    File Data Collection Mechanism
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.6" data-path="../monitoragent/jin-cheng-zhi-shou.html">
            
                <a href="../monitoragent/jin-cheng-zhi-shou.html">
            
                    
                    Process Keep-alive
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.7" data-path="../monitoragent/jie-dian-kong-zhi.html">
            
                <a href="../monitoragent/jie-dian-kong-zhi.html">
            
                    
                    Node Control
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../moniorframework.html">
            
                <a href="../moniorframework.html">
            
                    
                    Monitor Framework
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../moniorframework.html">
            
                <a href="../moniorframework.html">
            
                    
                    MOF Architecture
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../moniorframework/mof-agent.html">
            
                <a href="../moniorframework/mof-agent.html">
            
                    
                    MOF Agent
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../moniorframework/supportor.html">
            
                <a href="../moniorframework/supportor.html">
            
                    
                    Supportor
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../moniorframework/globalfilter.html">
            
                <a href="../moniorframework/globalfilter.html">
            
                    
                    GlobalFilter
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../moniorframework/interceptframework.html">
            
                <a href="../moniorframework/interceptframework.html">
            
                    
                    InterceptFramework
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../moniorframework/captureframework.html">
            
                <a href="../moniorframework/captureframework.html">
            
                    
                    CaptureFramework
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../moniorframework/mofshu-ju-cai-ji.html">
            
                <a href="../moniorframework/mofshu-ju-cai-ji.html">
            
                    
                    MOF Data Collection
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.7.1" data-path="../moniorframework/shi-shi-shu-ju-sheng-cheng.html">
            
                <a href="../moniorframework/shi-shi-shu-ju-sheng-cheng.html">
            
                    
                    Monitoring Data Collection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.2" data-path="../moniorframework/hua-xiang-shu-ju-cai-ji.html">
            
                <a href="../moniorframework/hua-xiang-shu-ju-cai-ji.html">
            
                    
                    Profile Data Collection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.3" data-path="../moniorframework/diao-yong-lian-shu-ju-sheng-cheng.html">
            
                <a href="../moniorframework/diao-yong-lian-shu-ju-sheng-cheng.html">
            
                    
                    Invocation Chain Data Collection
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7.4" data-path="../moniorframework/xian-cheng-fen-xi-shu-ju-cai-ji.html">
            
                <a href="../moniorframework/xian-cheng-fen-xi-shu-ju-cai-ji.html">
            
                    
                    Thread Analysis Data Collection
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >HM Interface</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="hm-interface">HM Interface</h1>
<p>HM provides API for external data access in the format below:</p>
<h3 id="http://ip:port/hm/cache/q"><a href="http://ip:port/hm/cache/q" target="_blank">http://ip:port/hm/cache/q</a> </h3>
<p>HM interface allows query of cached profile data, monitoring data and iplink data. The default exposed query port is 8765. Below are instances to query the specifized types of data.</p>
<h4 id="1-profile-data">1. Profile Data</h4>
<ul>
<li><h5 id="query-all-profile-data">Query all profile data</h5>
<pre><code>  POST localhost:8765/hm/cache/q
  {
      &quot;intent&quot;:&quot;profile&quot;,
      &quot;request&quot;:{    
       }
  }
</code></pre><p>Returned result</p>
<pre><code>  Below is the format of the result returned: 
  {rs: &quot;{&quot;UAV@http://127.0.0.1:8080/apphub/&#x2026;{}}}\...&quot;}&quot;}

  Below is the format of detalied contents in rs, wherein the key, composed of {appgroup}@{appurl}, is the unique identifier of each instance and the value is the profile data of the instance
  {
      UAV@http://127.0.0.1:8080/:&quot;{...}&quot;
      UAV@http://127.0.0.1:8080/apphub/:&quot;{...}&quot;
      UAV@http://127.0.0.1:10101/:&quot;{...}&quot;
      UAV@http://127.0.0.1:10102/:&quot;{...}&quot;
      UAV@jse://127.0.0.1/com.alibaba.rocketmq.broker.BrokerStartup-2144:&quot;{...}&quot;
      UAV@jse://127.0.0.1/com.alibaba.rocketmq.namesrv.NamesrvStartup-3980:&quot;{...}&quot;
      UAV@jse://127.0.0.1/org.elasticsearch.bootstrap.Elasticsearch-13424:&quot;{...}&quot;
  }

  Below is the format of the profile data
  {
      appdes:&quot;&quot;
      appgroup:&quot;UAV&quot;
      appid:&quot;ROOT&quot;
      appmetrics:&quot;{&quot;M24hr_UsrLog&quot;:{}}&quot;
      appurl:&quot;http://127.0.0.1/&quot;
      cpt.clients:&quot;[]&quot;
      cpt.filters:&quot;{&quot;org.apache.tomcat.websocket.server.WsFilter&quot;:{&quot;dyn&quot;:{&quot;servletNames&quot;:[],&quot;urlPatterns&quot;:[&quot;/*&quot;],&quot;filterName&quot;:&quot;Tomcat WebSocket (JSR356) Filter&quot;}}}&quot;
      cpt.listeners:&quot;{&quot;org.apache.tomcat.websocket.server.WsContextListener&quot;:{&quot;dyn&quot;:{}},&quot;org.apache.tomcat.websocket.server.WsSessionListener&quot;:{&quot;dyn&quot;:{}}}&quot;
      cpt.services:&quot;{}&quot;
      host:&quot;DESKTOP-84FNUC2&quot;
      ip:&quot;127.0.0.1&quot;
      jars.lib:&quot;@LAZY&quot;
      logs.log4j:&quot;{}&quot;
      mofmeta:&quot;{&quot;NetCardIndex&quot;:&quot;0&quot;,&quot;NetCardName&quot;:&quot;&quot;}&quot;
      state:&quot;1&quot;
      svrid:&quot;E:/UAVIDE/tomcat/apache-tomcat-7.0.65---E:/UAVIDE/defaultworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0&quot;
      time:1512455925270
      webapproot:&quot;E:/UAVIDE/defaultworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/ROOT&quot;
  }
</code></pre></li>
<li><h5 id="query-the-profile-data-of-a-specifized-appgroup">Query the profile data of a specifized appgroup</h5>
<p>The instance below queries all the profile data of UAV</p>
<pre><code>  POST localhost:8765/hm/cache/q
  {
      &quot;intent&quot;:&quot;profile&quot;,
      &quot;request&quot;:{
         &quot;fkey&quot;:&quot;appgroup&quot;,
         &quot;fvalue&quot;:&quot;UAV&quot;
      }
  }
</code></pre><p>Returned result<br>The format is identical with that when all profile data is queried. But the result only includes the profile data of a specifized appgroup.</p>
</li>
<li><h5 id="query-the-profile-data-of-a-specifized-appurl">Query the profile data of a specifized appurl</h5>
<p>The instance below queries the <a href="http://127.0.0.1:8080/apphub/&#x7684;&#x6240;&#x6709;&#x5B9E;&#x4F8B;&#x7684;profile&#x6570;&#x636E;" target="_blank">profile data of all instances of the appurl http://127.0.0.1:8080/apphub/</a></p>
<pre><code>  POST localhost:8765/hm/cache/q
  {
      &quot;intent&quot;:&quot;profile&quot;,
      &quot;request&quot;:{
          &quot;fkey&quot;:&quot;appurl&quot;,
          &quot;fvalue&quot;:&quot;http://127.0.0.1:8080/apphub/&quot;
      }
  }
</code></pre><p>Returned result<br>The format is identical with that when all profile data is queried. But the result only includes the profile data of a specifized appurl.</p>
</li>
<li><h5 id="query-the-lib-data-of-an-application-instance-in-a-specifized-user-group">Query the lib data of an application instance in a specifized user group</h5>
<p>The instance below queries the <a href="http://127.0.0.1:8080/apphub/&#x7684;&#x5B9E;&#x4F8B;&#x4E2D;lib&#x4E0B;&#x7684;jar&#x5305;&#x6570;&#x636E;" target="_blank">jar package data under lib of an application instance with the appurl as http://127.0.0.1:8080/apphub/</a> and the appgroup as UAV</p>
<pre><code>    POST localhost:8765/hm/cache/q
    {
        &quot;intent&quot;:&quot;profile.detail&quot;,
        &quot;request&quot;:{
            &quot;target&quot;:&quot;profile.info.jarlib&quot;,
            &quot;field&quot;:&quot;UAV@http://127.0.0.1:8080/apphub/&quot;
        }
    }
</code></pre><p>Returned result</p>
<pre><code>    Below is the format of the result returned
    {rs: &quot;{&quot;UAV@http://127.0.0.1:8080/apphub/&#x2026;reditease.uav.hook.httpclients-1.0-sync3.jar\&quot;}&quot;}&quot;}

    Below is the format of detalied contents in rs, wherein the key is the application identifier and the value is the jar package data of the application instance
    {UAV@http://127.0.0.1:8080/apphub/: &quot;{&quot;com.creditease.uav.logging-1.0.jar&quot;:&quot;file:/E:/UA&#x2026;m.creditease.uav.hook.httpclients-1.0-sync3.jar&quot;}&quot;}

    Below is the detailed content of jar package data, wherein the key is the name of jar package and the value is the absolute path of jar package
    {
        aopalliance-repackaged-2.4.0-b31.jar:&quot;file:/E:/UAVIDE/defaultworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/com.creditease.uav.console/WEB-INF/lib/aopalliance-repackaged-2.4.0-b31.jar&quot;
        aredis-api-1.4.jar:&quot;file:/E:/UAVIDE/defaultworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/com.creditease.uav.console/WEB-INF/lib/aredis-api-1.4.jar&quot;
        com.creditease.uav.base-1.0.jar:&quot;file:/E:/UAVIDE/defaultworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/com.creditease.uav.console/WEB-INF/lib/com.creditease.uav.base-1.0.jar&quot;
        com.creditease.uav.cache.redis-1.0.jar:&quot;file:/E:/UAVIDE/defaultworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/com.creditease.uav.console/WEB-INF/lib/com.creditease.uav.cache.redis-1.0.jar&quot;
        com.creditease.uav.fastjson-1.2.6.jar:&quot;file:/E:/UAVIDE/defaultworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/com.creditease.uav.console/WEB-INF/lib/com.creditease.uav.fastjson-1.2.6.jar&quot;
        com.creditease.uav.helper-1.0.jar:&quot;file:/E:/UAVIDE/defaultworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/com.creditease.uav.console/WEB-INF/lib/com.creditease.uav.helper-1.0.jar&quot;
        com.creditease.uav.hook.httpclients-1.0-async.jar:&quot;file:/E:/UAVCode/uavGitLab/ce-datamonitorsystem/com.creditease.uav.monitorframework.buildComponent/target/build/com.creditease.uav.appfrk/com.creditease.uav.hook.httpclients-1.0-async.jar&quot;
        com.creditease.uav.hook.httpclients-1.0-sync3.jar:&quot;file:/E:/UAVCode/uavGitLab/ce-datamonitorsystem/com.creditease.uav.monitorframework.buildComponent/target/build/com.creditease.uav.appfrk/com.creditease.uav.hook.httpclients-1.0-sync3.jar&quot;
        ....
    }
</code></pre></li>
<li><h5 id="query-the-data-of-client-components-of-all-application-instances">Query the data of client components of all application instances</h5>
<pre><code>  POST localhost:8765/hm/cache/q
  {
    &quot;intent&quot;:&quot;clients&quot;,
    &quot;request&quot;:{
    }
  }
</code></pre><p>  Returned result</p>
<pre><code>    Below is the format of the result returned
    {rs: &quot;{&quot;C@UAV@http://127.0.0.1:10102/&quot;:&quot;[{\&quot;values\&quot;&#x2026;lasticsearch.bootstrap.Elasticsearch-13424&quot;:&quot;[]&quot;}&quot;}

    Below is the format of detailed contents in rs, wherein the key is the application identifier and the value is the client-side data included in the instance
    {
      C@UAV@http://127.0.0.1:8080/:&quot;[...]&quot;
      C@UAV@http://127.0.0.1:8080/apphub/:&quot;[...]&quot;
      C@UAV@http://127.0.0.1:10101/:&quot;[...]&quot;    
      C@UAV@http://127.0.0.1:10102/:&quot;[...]&quot;
      C@UAV@jse://127.0.0.1/com.alibaba.rocketmq.broker.BrokerStartup-2144:&quot;[...]&quot;
      C@UAV@jse://127.0.0.1/com.alibaba.rocketmq.namesrv.NamesrvStartup-3980:&quot;[...]&quot;
      C@UAV@jse://127.0.0.1/org.elasticsearch.bootstrap.Elasticsearch-13424:&quot;[...]&quot;
    }

    Below is the detailed content of the client data of an instance
    [
        {&quot;values&quot;:{&quot;urls&quot;:{&quot;/ah/app&quot;:{&quot;ACpost&quot;:1512455355327,&quot;ts&quot;:1512455355327},&quot;/ah/group&quot;:{&quot;ACpost&quot;:1512455355321,&quot;ts&quot;:1512455355321}},&quot;type&quot;:&quot;apache.http.AsyncClient&quot;,&quot;ts&quot;:1512455355327,&quot;state&quot;:&quot;-1&quot;},&quot;id&quot;:&quot;http://127.0.0.1:8011&quot;},
        {&quot;values&quot;:{&quot;urls&quot;:{&quot;ap&quot;:{&quot;ACauth&quot;:1512455530875,&quot;ACget&quot;:1512458763341,&quot;ACconfig&quot;:1512455530875,&quot;AChmget&quot;:1512455528761,&quot;AChmset&quot;:1512455355384,&quot;AChgetall&quot;:1512455528756,&quot;ts&quot;:1512458763341}},&quot;type&quot;:&quot;redis.client.Aredis&quot;,&quot;svr&quot;:&quot;redis&quot;,&quot;ts&quot;:1512458763341,&quot;state&quot;:&quot;1&quot;},&quot;id&quot;:&quot;redis://127.0.0.1:6379&quot;},
        {&quot;values&quot;:{&quot;urls&quot;:{&quot;/hm/cache/q&quot;:{&quot;ACpost&quot;:1512458763356,&quot;ts&quot;:1512458763356}},&quot;type&quot;:&quot;apache.http.AsyncClient&quot;,&quot;ts&quot;:1512458763356,&quot;state&quot;:&quot;1&quot;},&quot;id&quot;:&quot;http://127.0.0.1:8765&quot;}
    ]
</code></pre></li>
</ul>
<h4 id="2-monitoring-data">2. Monitoring Data</h4>
<p>The example below queried <a href="http://127.0.0.1:8080/com.creditease.uav.console&#x5E94;&#x7528;&#x7684;err&#x548C;RC&#x6570;&#x636E;&#xFF0C;&#x53E6;&#x5916;&#x8FD8;&#x652F;&#x6301;&#x7684;metric&#x8FD8;&#x6709;appResp.warn" target="_blank">the err and RC data of the application http://127.0.0.1:8080/com.creditease.uav.console with the IP as 127.0.0.1. The time range queried is between 1512450873892 and 1512450933892. It also supports the query of such metrics as appResp.warn</a>, appResp.EXT, appResp.tmax, appResp.tsum, appResp.tavg, appResp.tmin and appResp.count.</p>
<pre><code>    POST localhost:8765/hm/cache/q
    {
        &quot;intent&quot;:&quot;monitor&quot;,
        &quot;request&quot;:{
            &quot;cache.query.json&quot;:&quot;{
                \&quot;start\&quot;:1512450873892,
                \&quot;end\&quot;:1512450933892,
                \&quot;queries\&quot;:[
                    {
                        \&quot;aggregator\&quot;:\&quot;avg\&quot;,
                        \&quot;metric\&quot;:\&quot;appResp.err\&quot;,
                        \&quot;tags\&quot;:{
                                \&quot;ip\&quot;:\&quot;127.0.0.1\&quot;,
                                \&quot;pgid\&quot;:\&quot;E/u003a/UAVIDE/tomcat/apache-tomcat-7.0.65---E/u003a/UAVIDE/defaultworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0\&quot;,
                                \&quot;instid\&quot;:\&quot;http/u003a//127.0.0.1/u003a8080/apphub---apphub\&quot;
                        }
                     }, 
                     {
                         \&quot;aggregator\&quot;:\&quot;avg\&quot;,
                         \&quot;metric\&quot;:\&quot;appResp.RC\&quot;,
                         \&quot;tags\&quot;:{
                             \&quot;ip\&quot;:\&quot;127.0.0.1\&quot;,
                             \&quot;pgid\&quot;:\&quot;E/u003a/UAVIDE/tomcat/apache-tomcat-7.0.65---E/u003a/UAVIDE/defaultworkspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0\&quot;,
                             \&quot;instid\&quot;:\&quot;http/u003a//127.0.0.1/u003a8080/apphub---apphub\&quot;,
                             \&quot;ptag\&quot;:\&quot;*\&quot;
                         }
                     }
                 ]
             }&quot;
         }
     }
</code></pre><p>Returned result</p>
<pre><code>  Below is the format of the result returned
  {rs: &quot;[{&quot;metric&quot;:&quot;appResp.RC200&quot;,&quot;tags&quot;:{&quot;ip&quot;:&quot;127.0.0.1&#x2026;}]&quot;}

  Below is the format of the detailed content in rs
  [
      {metric: &quot;appResp.RC200&quot;, tags: {&#x2026;}, dps: {&#x2026;}}
      {metric: &quot;appResp.RC304&quot;, tags: {&#x2026;}, dps: {&#x2026;}}
      {metric: &quot;appResp.RC302&quot;, tags: {&#x2026;}, dps: {&#x2026;}}
      {metric: &quot;appResp.err&quot;, tags: {&#x2026;}, dps: {&#x2026;}}
  ]

  Tags are basically identical with those in the request parameter. The difference lies in the fact that if there is ptag: &quot;*&#x201D; in the request parameter, then the result returned shall be further classified. Take appResp.RC as an example. The result returned shall be classified based on RC200, RC304 and RC302.

  Below is the format of the detailed content in dps
  {
      1512460980270:347
      1512460995260:349
      1512461010270:353
      1512461025270:353
  }
</code></pre><h4 id="3-iplink-data">3. IPlink Data</h4>
<pre><code>    POST localhost:8765/hm/cache/q

    {
        &quot;intent&quot;:&quot;iplnk&quot;,
        &quot;request&quot;:{
            &quot;appgpids&quot;:&quot;[
                \&quot;UAV@http://127.0.0.1:8080/apphub/\&quot;,
                \&quot;UAV@jse://127.0.0.1/org.elasticsearch.bootstrap.Elasticsearch-13424\&quot;
            ]&quot;
        }
    }
</code></pre><p>Returned result</p>
<pre><code>  Below is the format of the result returned
  {rs: &quot;{&quot;UAV@jse://127.0.0.1/org.elasticsearch.bootst&#x2026;56.1\&quot;:1512462439074},\&quot;ts\&quot;:1512462439074}&quot;}}&quot;}

  Below is the format of detailed contents in rs, wherein the key is the application identifier and the value is the iplink data
  {
      UAV@http://127.0.0.1:8080/apphub/:{...}
      UAV@jse://127.0.0.1/org.elasticsearch.bootstrap.Elasticsearch-13424:{}
  }

  Below is the format of the detailed content of iplink data
  {
      browser://127.0.0.1:8080/apphub:&quot;{&quot;urls&quot;:{&quot;/rs/gui/loadTemp&quot;:1512455530051,&quot;/rs/godeye/profile/q/iplink&quot;:1512462406887,&quot;/uavapp_godeye/appmonitor/main.html&quot;:1512462378880,&quot;/rs/godeye/profile/q/cache&quot;:1512462439074,&quot;/rs/godeye/monitor/q/hm&quot;:1512462406898,&quot;/rs/gui/login&quot;:1512455528725,&quot;/rs/gui/loadMainMenu&quot;:1512455528745,&quot;/rs/gui/jumpAppPage&quot;:1512455529989,&quot;/rs/gui/loadUserManageInfo&quot;:1512455528765},&quot;clients&quot;:{&quot;user://192.168.56.1&quot;:1512462439074},&quot;ts&quot;:1512462439074}&quot;
      browser://127.0.0.1:8080/apphub-ts:&quot;1512462439074&quot;
  }
</code></pre><h3 id="http://ip:port/ivc/q"><a href="http://ip:port/ivc/q" target="_blank">http://ip:port/ivc/q</a> </h3>
<p>Users are allowed to query the lightweight invocation chain data via this interface, with the default query port being 7799</p>
<h4 id="1-instance-of-query-for-the-invocation-chain-data">1. Instance of Query for the Invocation Chain Data</h4>
<pre><code>    POST localhost:7799/ivc/q
    {
        &quot;intent&quot;:&quot;qApp&quot;,
        &quot;request&quot;:{
            &quot;appuuid&quot;:&quot;http://127.0.0.1:8080/apphub---apphub&quot;,
            &quot;stime&quot;:&quot;1512377369878&quot;,
            &quot;etime&quot;:&quot;1512463769878&quot;,
            indexdate:&quot;2017-12-7&quot;,//The date when the invocation chain is generated. Optional if logs generated within the current week are to be queried
            &quot;eptype&quot;:&quot;E,S&quot;,
            &quot;from&quot;:&quot;0&quot;,
            &quot;size&quot;:&quot;100&quot;,
            &quot;sort&quot;:&quot;cost=DESC&quot;
        }
    }
</code></pre><p>Returned result</p>
<pre><code>  Below is the format of the result returned, wherein rs is the invocation chain data and count is the total number of data

  {
     rs:[{&quot;traceid&quot;:&quot;127.0.0.1_8080_1512463713021_56_6&#x2026;.console&quot;,&quot;state&quot;:&quot;200&quot;    ,&quot;class&quot;:&quot;&quot;,&quot;eptype&quot;:&quot;E&quot;}]&quot;,
     count: &quot;25&quot;
  }

  Below is the format of the detailed content in rs
  [
        {traceid: &quot;127.0.0.1_8080_1512463713021_56_6&quot;, appuuid: &quot;http://127.0.0.1:8080/apphub---apphub&quot;, cost: 835, ipport: &quot;127.0.0.1:8080&quot;, method: &quot;loadTemp&quot;, &#x2026;}
        {traceid: &quot;127.0.0.1_8080_1512463713886_53_7&quot;, appuuid: &quot;http://127.0.0.1:8080/apphub---apphub&quot;, cost: 180, ipport: &quot;127.0.0.1:8080&quot;, method: &quot;createValidataCode&quot;, &#x2026;}
        {traceid: &quot;127.0.0.1_8080_1512463740450_55_11&quot;, appuuid: &quot;http://127.0.0.1:8080/apphub---apphub&quot;, cost: 28, ipport: &quot;127.0.0.1:8080&quot;, method: &quot;loadUserManageInfo&quot;, &#x2026;}
        {traceid: &quot;127.0.0.1_8080_1512463740398_54_8&quot;, appuuid: &quot;http://127.0.0.1:8080/apphub---apphub&quot;, cost: 20, ipport: &quot;127.0.0.1:8080&quot;, method: &quot;login&quot;, &#x2026;}
        {traceid: &quot;127.0.0.1_8080_1512463743000_56_17&quot;, appuuid: &quot;http://127.0.0.1:8080/apphub---apphub&quot;, cost: 14, ipport: &quot;127.0.0.1:8080&quot;, method: &quot;getMonitorData&quot;, &#x2026;}
        ...
  }

  Below is the format of the detailed content of each invocation chain
  {
        appgroup:&quot;UAV&quot;
        appid:&quot;com.creditease.uav.console&quot;
        appuuid:&quot;http://127.0.0.1/apphub---apphub&quot;
        class:&quot;com.creditease.uav.apphub.rest.GUIService&quot;
        cost:835
        epinfo:&quot;http.service,mtd=GET,src=10.10.168.155&quot;
        eptype:&quot;E&quot;
        ipport:&quot;127.0.0.1:8080&quot;
        method:&quot;loadTemp&quot;
        parentid:&quot;N&quot;
        spanid:&quot;1&quot;
        state:&quot;200&quot;
        stime:1512463713021
        traceid:&quot;127.0.0.1_8080_1512463713021_56_6&quot;
        url:&quot;http://localhost:8080/apphub/rs/gui/loadTemp&quot;
  }
</code></pre><h4 id="2-instance-of-query-for-invocation-chain-details">2. Instance of Query for Invocation Chain Details</h4>
<pre><code>  POST localhost:7799/ivc/q
  {
      &quot;intent&quot;:&quot;qTrace&quot;,
      &quot;request&quot;:{
          &quot;traceid&quot;:&quot;127.0.0.1_8080_1512463713021_56_6&quot;,
          &quot;from&quot;:&quot;0&quot;,
          &quot;size&quot;:&quot;1000&quot;,
          &quot;sort&quot;:&quot;spanid=ASC,stime=ASC,epinfo=ASC&quot;
      }
  }
</code></pre><p>Returned result</p>
<pre><code>  Below is the format of the result returned, wherein rs is the invocation chain details and count is the total number of data
  {
       rs: &quot;[{&quot;traceid&quot;:&quot;127.0.0.1_8080_1512463713021_56_6...ase.uav.httpasync.HttpAsyncClient&quot;,&quot;eptype&quot;:&quot;C&quot;}]&quot;,
       count: &quot;8&quot;
  }

  Below is the format of the detailed content in rs
  [
       {traceid: &quot;127.0.0.1_8080_1512463713021_56_6&quot;, appuuid: &quot;http://127.0.0.1:8080/apphub---aphub&quot;, cost: 835, ipport: &quot;127.0.0.1:8080&quot;, method: &quot;loadTemp&quot;, &#x2026;}
       {traceid: &quot;127.0.0.1_8080_1512463713021_56_6&quot;, appuuid: &quot;http://127.0.0.1:8080/apphub---aphub&quot;, cost: 100, ipport: &quot;127.0.0.1:8080&quot;, method: &quot;doHttpOutboundAsyncInternal&quot;, &#x2026;}
       {traceid: &quot;127.0.0.1_8080_1512463713021_56_6&quot;, appuuid: &quot;http://127.0.0.1:8080/apphub---aphub&quot;, cost: 75, ipport: &quot;127.0.0.1:8080&quot;, method: &quot;doHttpOutboundAsyncInternal&quot;, &#x2026;}
       {traceid: &quot;127.0.0.1_8080_1512463713021_56_6&quot;, appuuid: &quot;http://127.0.0.1:8080/apphub---aphub&quot;, cost: 73, ipport: &quot;127.0.0.1:8080&quot;, method: &quot;doHttpOutboundAsyncInternal&quot;, &#x2026;}
       {traceid: &quot;127.0.0.1_8080_1512463713021_56_6&quot;, appuuid: &quot;http://127.0.0.1:8080/apphub---aphub&quot;, cost: 59, ipport: &quot;127.0.0.1:8080&quot;, method: &quot;doHttpOutboundAsyncInternal&quot;, &#x2026;}
       {traceid: &quot;127.0.0.1_8080_1512463713021_56_6&quot;, appuuid: &quot;http://127.0.0.1:8080/apphub---aphub&quot;, cost: 58, ipport: &quot;127.0.0.1:8080&quot;, method: &quot;doHttpOutboundAsyncInternal&quot;, &#x2026;}
       {traceid: &quot;127.0.0.1_8080_1512463713021_56_6&quot;, appuuid: &quot;http://127.0.0.1:8080/apphub---aphub&quot;, cost: 96, ipport: &quot;127.0.0.1:8080&quot;, method: &quot;doHttpOutboundAsyncInternal&quot;, &#x2026;}
       {traceid: &quot;127.0.0.1_8080_1512463713021_56_6&quot;, appuuid: &quot;http://127.0.0.1:8080/apphub---aphub&quot;, cost: 18, ipport: &quot;127.0.0.1:8080&quot;, method: &quot;doHttpOutboundAsyncInternal&quot;, &#x2026;}
  ]

  The format of the detailed content for each log is identical with the content structure of the invocation chain data
</code></pre><h3 id="http://ip:port/slw/q"><a href="http://ip:port/slw/q" target="_blank">http://ip:port/slw/q</a> </h3>
<p>Users are allowed query the heavyweight invocation chain data via this interface, with the default query port being 7799</p>
<pre><code>  POST localhost:7799/slw/q
  {
      &quot;intent&quot;:&quot;qParams&quot;,
      &quot;request&quot;:{
          &quot;traceid&quot;:&quot;127.0.0.1_8080_1512528400374_94_10&quot;,
          &quot;spanid&quot;:&quot;1.1&quot;,
          &quot;epinfo&quot;:&quot;apache.http.AsyncClient&quot;,
          &quot;appid&quot;:&quot;apphub&quot;
      }
  }
</code></pre><p>Returned result</p>
<pre><code>  Below is the format of the result returned, wherein rs is the heavyweight invocation chain data and count is the total number of data
  {
      rs: &quot;[{&quot;traceid&quot;:&quot;127.0.0.1_8080_1512528400374_94_1...values\\&quot;:{\\\\\\\\\\\\\\\&quot;urls\\&quot;}]&quot;,
      count: &quot;1&quot;
  }

  Below is the format of the detailed content in rs
  [
      {
          appgroup:&quot;UAV&quot;
          appid:&quot;apphub&quot;
          appuuid:&quot;http://127.0.0.1:8080/apphub---apphub&quot;
          epinfo:&quot;apache.http.AsyncClient&quot;
          rpc_req_body:&quot;{&quot;intent&quot;:&quot;profile&quot;,&quot;request&quot;:{},&quot;responseAsJsonString&quot;:&quot;{}&quot;}&quot;
          rpc_req_head:&quot;{&quot;param.http.head.span&quot;:&quot;127.0.0.1_8080_1512528400374_94_10&amp;1.1&amp;1&amp;&quot;,&quot;UAV-Client-Src&quot;:&quot;http://127.0.0.1:8080/apphub&quot;}{}&quot;
          rpc_rsp_body:&quot;{&quot;rs&quot;:&quot;{\&quot;UAV@jse://127.0.0.1/edu.umd.cs.findb....&quot;:{\\\\\\\&quot;urls\&quot;
          rpc_rsp_head:&quot;{&quot;Content-length&quot;:&quot;113376&quot;,&quot;Date&quot;:&quot;Wed, 06 Dec 2017 02:46:40 GMT&quot;}&quot;
          spanid:&quot;1.1&quot;
          traceid:&quot;127.0.0.1_8080_1512528400374_94_10&quot;
      }
  ]
</code></pre><h3 id="http://ip:port/jta/q"><a href="http://ip:port/jta/q" target="_blank">http://ip:port/jta/q</a> </h3>
<p>Users are allowed to query the thread analysis data via this interface, with the default query port being 5566</p>
<h4 id="1-instance-of-query-for-the-thread-analysis-data">1. Instance of Query for the Thread Analysis Data</h4>
<pre><code>  POST localhost:5566/jta/q
  {
      &quot;intent&quot;:&quot;qDistinct&quot;,
      &quot;request&quot;:{&quot;ipport&quot;:&quot;127.0.0.1:8080&quot;}
  }
</code></pre><p>Returned result</p>
<pre><code>    Below is the format of the result returned, wherein rs is the thread analysis data and count is the total number of data
    {
        rs: &quot;[{&quot;threadcount&quot;:120,&quot;time&quot;:&quot;1512537011959&quot;,&quot;user&quot;:&#x2026;ount&quot;:120,&quot;time&quot;:&quot;1512531600647&quot;,&quot;user&quot;:&quot;admin&quot;}]&quot;,
        count: &quot;3&quot;
    }

    Below is the format of the detailed content in rs
    [
        {threadcount: 120, time: &quot;1512537011959&quot;, user: &quot;admin&quot;}
        {threadcount: 120, time: &quot;1512536880350&quot;, user: &quot;admin&quot;}
        {threadcount: 120, time: &quot;1512531600647&quot;, user: &quot;admin&quot;}
    ]
</code></pre><h4 id="2-instance-of-query-for-thread-analysis-details">2. Instance of Query for Thread Analysis Details</h4>
<pre><code>  POST localhost:5566/jta/q
  {
      &quot;intent&quot;:&quot;qField&quot;,
      &quot;request&quot;:{
          &quot;stime&quot;:&quot;1512537011959&quot;,
          &quot;etime&quot;:&quot;1512537011959&quot;,
          &quot;ipport&quot;:&quot;127.0.0.1:8080&quot;,
          &quot;from&quot;:&quot;0&quot;,
          &quot;size&quot;:&quot;5000&quot;,
          &quot;sort&quot;:
          &quot;percpu=DESC&quot;
      }
  }
</code></pre><p>Returned result</p>
<pre><code>   Below is the format of the result returned, wherein rs is the detailed data of each thread analysis and count is the total number of data

  {
      rs: &quot;[{&quot;ipport&quot;:&quot;127.0.0.1:8080&quot;,&quot;appgroup&quot;:&quot;UNKNO&#x2026;9a501b9000 nid=0x2309 waiting on condition\r\n&quot;}]&quot;, 
      count: &quot;120&quot;
  }

  Below is the format of the detailed content in rs
  [
      {ipport: &quot;127.0.0.1:8080&quot;, appgroup: &quot;UNKNOWN&quot;, pname: &quot;&quot;, percpu: 6.699999809265137, pid: &quot;&quot;, &#x2026;}
      {ipport: &quot;127.0.0.1:8080&quot;, appgroup: &quot;UNKNOWN&quot;, pname: &quot;&quot;, percpu: 0, pid: &quot;&quot;, &#x2026;}
      {ipport: &quot;127.0.0.1:8080&quot;, appgroup: &quot;UNKNOWN&quot;, pname: &quot;&quot;, percpu: 0, pid: &quot;&quot;, &#x2026;}
      {ipport: &quot;127.0.0.1:8080&quot;, appgroup: &quot;UNKNOWN&quot;, pname: &quot;&quot;, percpu: 0, pid: &quot;&quot;, &#x2026;}
      {ipport: &quot;127.0.0.1:8080&quot;, appgroup: &quot;UNKNOWN&quot;, pname: &quot;&quot;, percpu: 0, pid: &quot;&quot;, &#x2026;}
      {ipport: &quot;127.0.0.1:8080&quot;, appgroup: &quot;UNKNOWN&quot;, pname: &quot;&quot;, percpu: 0, pid: &quot;&quot;, &#x2026;}
      ...
  ]

  Below is the format of the content of each thread information
  {
      appgroup:&quot;UNKNOWN&quot;
      info:&quot;&quot;ContainerBackgroundProcessor[StandardEngine[Catalina]]&quot; #53 daemon prio=5 os_prio=0 tid=0x00007f9a50705800 nid=0x256e waiting on condition [0x00007f99f8ad8000]
              &#x21B5;java.lang.Thread.State: TIMED_WAITING (sleeping)
              &#x21B5;at java.lang.Thread.sleep(Native Method)
              &#x21B5;at org.apache.catalina.core.ContainerBase$ContainerBackgroundProcessor.run(ContainerBase.java:1355)
              &#x21B5;at java.lang.Thread.run(Thread.java:745)
          &#x21B5;&quot;
      ipport:&quot;127.0.0.1:8080&quot;
      percpu:6.699999809265137
      permem:11
      pid:&quot;&quot;
      pname:&quot;&quot;
      state:&quot;TIMED_WAITING (sleeping)&quot;
      tid:&quot;9582&quot;
      time:1512537011959
      timeadd:&quot;0:56.37&quot;
      user:&quot;admin&quot;
  }
</code></pre><h3 id="http://ip:port/hm/query"><a href="http://ip:port/hm/query" target="_blank">http://ip:port/hm/query</a> </h3>
<p>HM interface allows users to query the history monitoring data and nodeInfo. The default exposed query port is 8765. Below is a instance to query a specifized type of data.</p>
<ul>
<li><h5 id="query-nodeinfo-data">Query nodeInfo data</h5>
</li>
</ul>
<p>The example below is to query process metrics.</p>
<pre><code>  POST localhost:8765/hm/query
  {
  &quot;request&quot;: {
    &quot;opentsdb.query.json&quot;:&quot;{
        \&quot;start\&quot;:1512544020000,
        \&quot;end\&quot;:1512544140000,
        \&quot;queries\&quot;:[{
            \&quot;aggregator\&quot;:\&quot;sum\&quot;,
            \&quot;downsample\&quot;:\&quot;1m-avg\&quot;,
            \&quot;metric\&quot;:\&quot;procState.conn\&quot;,
            \&quot;tags\&quot;:{
                \&quot;instid\&quot;:\&quot;127.0.0.0.1_org.elasticsearch.bootstrap.Elasticsearch_10508\&quot;
            }
        }]
    }&quot;,
    &quot;datastore.name&quot;: &quot;MT_Monitor&quot;
  }
  }
  wherein &#x201C;start&#x201D; and &#x201C;end&#x201D; denote the starting time and the ending time , &#x201C;queries&#x201D; denote the query conditions, &#x201C;metric&#x201D; denotes the name of a performance metric and &#x201C;tags&#x201D; denote the query conditions of a specific process
</code></pre><p>Returned result<br>Below is the format of the data returned:</p>
<pre><code>  {
  &quot;rs&quot;: &quot;[{
      &quot;metric&quot;:&quot;procState.conn&quot;,
      &quot;tags&quot;:{
          &quot;pgid&quot;:&quot;org.elasticsearch.bootstrap.Elasticsearch&quot;,
          &quot;instid&quot;:&quot;127.0.0.1_org.elasticsearch.bootstrap.Elasticsearch_10508&quot;,
          &quot;ip&quot;:&quot;127.0.0.1&quot;
      },
      &quot;aggregateTags&quot;:[],
      &quot;dps&quot;:{
          &quot;1512544020&quot;:14.0,
          &quot;1512544080&quot;:14.0,
          &quot;1512544140&quot;:14.0
      }
  }]&quot;
  }
  wherein, &#x201C;metric&#x201D; denotes the name of a performance metric, &#x201C;tags&#x201D; denote the query conditions and &#x201C;dps&#x201D; denotes the history data returned
</code></pre><h3 id="http://ip:port/hb/query"><a href="http://ip:port/hb/query" target="_blank">http://ip:port/hb/query</a> </h3>
<p>This interface allows users to query the cached nodeInfo. The default exposed query port is 8020. Below are instances to query specifized types of data.</p>
<h4 id="1-query-the-heartbeat-data-of-all-containers">1. Query the Heartbeat Data of All Containers</h4>
<pre><code>  POST localhost:8020/hb/query
  {
  &quot;intent&quot;:&quot;node&quot;,
  &quot;request&quot;:{
   }
  }
</code></pre><p>Returned result<br>Below is the format of the data returned:</p>
<pre><code>  {  
  &quot;rs&quot;: &quot;{
    &quot;938300339801718784&quot;:&quot;{  
      &quot;clientTimestamp&quot;: 1512546163627,  
      &quot;group&quot;: &quot;&quot;,  
      &quot;host&quot;: &quot;DESKTOP-KDVH36F&quot;,  
      &quot;id&quot;: &quot;938300339801718784&quot;,  
      &quot;info&quot;: {  
          &quot;os.io.disk&quot;: &quot;{&quot;  
              E: &quot;:{
                &quot;disk\_read&quot;:&quot;0.00&quot;,
                &quot;total&quot;:&quot;46079996&quot;,
                &quot;use&quot;:&quot;18136596&quot;,
                &quot;useRate&quot;:&quot;39%&quot;,  
                &quot;free&quot;:&quot;27943400&quot;,
                &quot;disk\_write&quot;:&quot;0.00&quot;
              },  
              &quot;D: &quot;:{
                &quot;disk\_read&quot;:&quot;0.00&quot;,
                &quot;total&quot;:&quot;77163516&quot;,
                &quot;use&quot;:&quot;14794732&quot;,
                &quot;useRate&quot;:&quot;19%&quot;,
                &quot;free&quot;:&quot;62368784&quot;,
                &quot;disk\_write&quot;:&quot;0.00&quot;
              },  
              &quot;C: &quot;:{
                &quot;disk\_read&quot;:&quot;0.00&quot;,
                &quot;total&quot;:&quot;125576188&quot;,
                &quot;use&quot;:&quot;53220416&quot;,
                &quot;useRate&quot;:&quot;42%&quot;,
                &quot;free&quot;:&quot;72355772&quot;,
                &quot;disk\_write&quot;:&quot;0.00&quot;
               }
            }&quot;,  
        &quot;node.pid&quot;: &quot;15412&quot;,  
        &quot;node.hbserver&quot;: &quot;127.0.0.1:8010&quot;,  
        &quot;os.cpu.maxmem&quot;: &quot;17058336768&quot;,  
        &quot;os.arch&quot;: &quot;amd64&quot;,  
        &quot;node.services&quot;: &quot;{  
              &quot;nodeoperagent-NodeOperHttpServer-/node/ctrl&quot;:&quot;http: //localhost: 10101/node/ctrl&quot;}&quot;,  
              &quot;node.state&quot;: &quot;1&quot;,  
              &quot;os.type&quot;: &quot;Windows 10&quot;,  
              &quot;os.java.vm&quot;: &quot;Java HotSpot\(TM\) 64-Bit Server VM&quot;,  
              &quot;node.feature&quot;: &quot;{&quot;hbclientagent&quot;:\[&quot;HeartBeatClientAgent&quot;\],  
              &quot;procscan&quot;:\[&quot;ProcDetectAgent&quot;\],  
              &quot;nodeoperagent&quot;:\[&quot;NodeOperAgent&quot;\],  
              &quot;threadanalysis&quot;:\[&quot;ThreadAnalysisAgent&quot;\],  
              &quot;collectclient&quot;:\[&quot;CollectDataAgent&quot;\],  
              &quot;logagent&quot;:\[&quot;LogAgent&quot;\],  
              &quot;procwatch&quot;:\[&quot;ProcWatchAgent&quot;\],  
              &quot;notifyagent&quot;:\[&quot;GlobalNotificationAgent&quot;\],  
              &quot;monitoragent&quot;:\[&quot;MonitorAgent&quot;\]}&quot;,  
              &quot;node.profile&quot;: &quot;agent&quot;,  
              &quot;os.mac&quot;: &quot;F4:96:34:86:B9:EC&quot;,  
              &quot;os.cpu.number&quot;: &quot;8&quot;,  
              &quot;os.java.ver&quot;: &quot;1.8.0\_131&quot;,  
              &quot;node.tags&quot;: &quot;Elasticsearch, UAV.AppHub, Monitor Agent, jar, BrokerStartup, NamesrvStartup, Health Manager,&quot;,  
              &quot;os.cpu.load&quot;: &quot;9&quot;,  
              &quot;node.version&quot;: &quot;1.0&quot;,  
              &quot;node.procs&quot;: &quot;{......}&quot;,  
              &quot;os.java.home&quot;: &quot;D:\java\jdk1.8.0\_131\jre&quot;,  
              &quot;os.conn.cur&quot;: &quot;-1&quot;,  
              &quot;os.cpu.freemem&quot;: &quot;8731549696&quot;,  
              &quot;node.root&quot;: &quot;D:\GITStoreXinJian\ce-datamonitorsystem\com.creditease.uav.agent.buildComponent\target\build&quot;,  
              &quot;os.cpu.avgload&quot;: &quot;-100&quot;  
        },  
      &quot;ip&quot;: &quot;localhost&quot;,  
      &quot;name&quot;: &quot;Monitor Agent&quot;,  
      &quot;serverTimestamp&quot;: 1512546163630  
    }&quot;,  
    &quot;938300359816974336&quot;:&quot;{.....}&quot;  
  }&quot;  
  }
</code></pre><p>Below is the content of node.procs:</p>
<pre><code>  &quot;{&quot;12464&quot;:{
      &quot;name&quot;:&quot;java&quot;,&quot;pid&quot;:&quot;12464&quot;,&quot;ports&quot;:\[\],
      &quot;tags&quot;:{
          &quot;main&quot;:&quot;com.creditease.mscp.boot.MSCPBoot&quot;,
          &quot;jargs&quot;:&quot;-agentlib: jdwp=transport=dt\_socket,suspend=y,
                     address=localhost: 55338-javaagent: 
                     D: \GITStoreXinJian\ce-datamonitorsystem\com.creditease.uav.monitorframework.buildComponent\target\build\com.creditease.uav.agent\com.creditease.uav.monitorframework.agent-1.0-agent.jar-Dfile.encoding=UTF-8&quot;,
          &quot;jflags&quot;:&quot;&quot;,
          &quot;watch&quot;:&quot;false&quot;,
          &quot;conn\_8765&quot;:&quot;0&quot;,
          &quot;conn&quot;:&quot;3&quot;,
          &quot;memRate&quot;:&quot;7.88&quot;,
          &quot;mem&quot;:&quot;1312536&quot;,
          &quot;conn\_10102&quot;:&quot;0&quot;,
          &quot;conn\_55639&quot;:&quot;1&quot;,
          &quot;cpu&quot;:&quot;22.78&quot;
          ,&quot;conn\_8020&quot;:&quot;0&quot;,
          &quot;conn\_8010&quot;:&quot;2&quot;,
          &quot;conn\_8011&quot;:&quot;0&quot;,
          &quot;conn\_9000&quot;:&quot;0&quot;,
          &quot;conn\_5566&quot;:&quot;0&quot;,
          &quot;disk\_read&quot;:&quot;0.27&quot;,&quot;disk\_write&quot;:&quot;55.96&quot;
       }
     },
  &quot;15412&quot;:{
      &quot;name&quot;:&quot;java&quot;,&quot;pid&quot;:&quot;15412&quot;,&quot;ports&quot;:\[\],
      &quot;tags&quot;:{
          &quot;main&quot;:&quot;com.creditease.mscp.boot.MSCPBoot&quot;,
          &quot;jargs&quot;:&quot;-agentlib: jdwp=transport=dt\_socket,suspend=y,
               address=localhost: 55182-javaagent:
                D: \GITStoreXinJian\ce-datamonitorsystem\com.creditease.uav.monitorframework.buildComponent\target\build\com.creditease.uav.agent\com.creditease.uav.monitorframework.agent-1.0-agent.jar-Dfile.encoding=UTF-8&quot;,
          &quot;jflags&quot;:&quot;&quot;,
          &quot;watch&quot;:&quot;false&quot;,
          &quot;conn&quot;:&quot;1&quot;,
          &quot;memRate&quot;:&quot;1.68&quot;,
          &quot;mem&quot;:&quot;280076&quot;,
          &quot;conn\_10101&quot;:&quot;0&quot;,
          &quot;cpu&quot;:&quot;11.39&quot;,
          &quot;conn\_55263&quot;:&quot;1&quot;,
          &quot;disk\_read&quot;:&quot;20.36&quot;,
          &quot;disk\_write&quot;:&quot;33.41&quot;
        }
    },
  &quot;16292&quot;:{.......},
  &quot;4484&quot;:{.......},
  &quot;17272&quot;:{......},
  &quot;10508&quot;:{......}
  }&quot;
</code></pre><h4 id="2-query-the-heartbeat-data-of-containers-with-a-specifized-ip">2. Query the Heartbeat Data of Containers with a Specifized IP</h4>
<pre><code>  POST localhost:8020/hb/query
  {
   &quot;intent&quot;:&quot;node&quot;,
   &quot;request&quot;:{
      &quot;fkey&quot;:&quot;ip&quot;,
      &quot;fvalue&quot;:&quot;127.0.0.1&quot;
   }
  }
</code></pre><p>The structure of the data returned is identical with that when the heartbeat data of all containers is queried. But the result only includes the heatbeat data of the container with the specifized IP.</p>
<h4 id="3-query-the-heartbeat-data-of-containers-in-a-specifized-group">3. Query the Heartbeat Data of Containers in a Specifized Group</h4>
<p>Take UAV as an example (separate the names of multiple groups with comma)  </p>
<pre><code>  POST localhost:8020/hb/query
  {
  &quot;intent&quot;:&quot;node&quot;,
  &quot;request&quot;:{
      &quot;fkey&quot;:&quot;group&quot;,
      &quot;fvalue&quot;:&quot;UAV&quot;
  }
  }
</code></pre><p>The structure of the data returned is identical with that when the heartbeat data of all containers is queried. But the result only includes the heatbeat data of the container in the specifized group.</p>
<h4 id="4-query-the-heartbeat-data-of-the-registered-server-in-a-container">4. Query the Heartbeat Data of the Registered Server in a Container</h4>
<p>Take nodeoperagent-NodeOperHttpServer-/node/ctrl as an example</p>
<pre><code>  POST localhost:8020/hb/query
  {
  &quot;intent&quot;:&quot;services&quot;,
  &quot;request&quot;:{
      &quot;service&quot;:&quot;nodeoperagent-NodeOperHttpServer-/node/ctrl&quot;
  }
  }
</code></pre><p>Below is the format of the data returned:</p>
<pre><code>  {
  &quot;rs&quot;:&quot;[\&quot;http://127.0.0.1/node/ctrl\&quot;]&quot;
  }
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="diao-yong-lian.html" class="navigation navigation-prev " aria-label="Previous page: APM Server">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../monitoragent.html" class="navigation navigation-next " aria-label="Next page: Monitor Agent">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"HM Interface","level":"1.2.2.10","depth":3,"next":{"title":"Monitor Agent","level":"1.3","depth":1,"path":"monitoragent.md","ref":"monitoragent.md","articles":[{"title":"MA Architecture","level":"1.3.1","depth":2,"path":"monitoragent.md","ref":"monitoragent.md","articles":[]},{"title":"Heartbeat Mechanism","level":"1.3.2","depth":2,"path":"monitoragent/xin-tiao-ji-zhi.md","ref":"monitoragent/xin-tiao-ji-zhi.md","articles":[]},{"title":"Application Data Collection","level":"1.3.3","depth":2,"path":"monitoragent/ying-yong-shu-ju-cai-ji.md","ref":"monitoragent/ying-yong-shu-ju-cai-ji.md","articles":[{"title":"Application Monitoring Data","level":"1.3.3.1","depth":3,"path":"monitoragent/ying-yong-shu-ju-cai-ji/ying-yong-shi-shi-shu-ju.md","ref":"monitoragent/ying-yong-shu-ju-cai-ji/ying-yong-shi-shi-shu-ju.md","articles":[]},{"title":"Application Profile Data","level":"1.3.3.2","depth":3,"path":"monitoragent/ying-yong-shu-ju-cai-ji/ying-yong-hua-xiang-shu-ju.md","ref":"monitoragent/ying-yong-shu-ju-cai-ji/ying-yong-hua-xiang-shu-ju.md","articles":[]}]},{"title":"Node and Process Data Collection","level":"1.3.4","depth":2,"path":"monitoragent/rong-qi-ji-jin-cheng-shu-ju-cai-ji.md","ref":"monitoragent/rong-qi-ji-jin-cheng-shu-ju-cai-ji.md","articles":[]},{"title":"File Data Collection Mechanism","level":"1.3.5","depth":2,"path":"monitoragent/shu-ju-gui-ji-ji-zhi.md","ref":"monitoragent/shu-ju-gui-ji-ji-zhi.md","articles":[]},{"title":"Process Keep-alive","level":"1.3.6","depth":2,"path":"monitoragent/jin-cheng-zhi-shou.md","ref":"monitoragent/jin-cheng-zhi-shou.md","articles":[]},{"title":"Node Control","level":"1.3.7","depth":2,"path":"monitoragent/jie-dian-kong-zhi.md","ref":"monitoragent/jie-dian-kong-zhi.md","articles":[]}]},"previous":{"title":"APM Server","level":"1.2.2.9","depth":3,"path":"healthmanager/diao-yong-lian.md","ref":"healthmanager/diao-yong-lian.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"healthmanager/jie-kou-shuo-ming.md","mtime":"2018-06-28T09:51:28.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-07-02T03:08:45.482Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

